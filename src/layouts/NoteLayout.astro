---
import BaseLayout from "./BaseLayout.astro";
import { formatDate } from "../utils/formatDate";

interface Props {
  frontmatter: {
    title: string;
    date: Date;
    topic?: string;
  };
}

const { frontmatter } = Astro.props;
---

<BaseLayout title={frontmatter.title} type="article" showScrollProgress={true}>
  <article class="max-w-3xl mx-auto px-4 py-16">
    <header class="mb-8">
      <div class="flex items-center gap-4 text-sm text-gray-500 dark:text-gray-400 mb-4">
        <time datetime={frontmatter.date.toISOString()}>
          {formatDate(frontmatter.date)}
        </time>
        {
          frontmatter.topic && (
            <>
              <span>&middot;</span>
              <a
                href={`/notes?topic=${encodeURIComponent(frontmatter.topic)}`}
                class="text-primary-600 dark:text-primary-400 hover:underline"
              >
                {frontmatter.topic}
              </a>
            </>
          )
        }
      </div>
      <h1 class="text-3xl md:text-4xl font-bold text-gray-900 dark:text-white">
        {frontmatter.title}
      </h1>
    </header>
    <div
      class="prose prose-gray dark:prose-invert max-w-none prose-headings:font-semibold prose-a:text-primary-600 dark:prose-a:text-primary-400 prose-code:text-primary-700 dark:prose-code:text-primary-300 prose-code:bg-gray-100 dark:prose-code:bg-gray-800 prose-code:px-1.5 prose-code:py-0.5 prose-code:rounded"
    >
      <slot />
    </div>
  </article>
</BaseLayout>
